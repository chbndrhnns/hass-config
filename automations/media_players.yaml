  - alias: Turn off TV appliances if the TV is off for an hour
    trigger:
      platform: state
      entity_id: media_player.living_room_tv
      to: 'off'
      for:
        minutes: 15
    action:
      - service: script.power_off
      - service: switch.turn_off
        data:
          entity_id: switch.virt_livebox_play

  - alias: 'Watching Téva'
    initial_state: false
    trigger:
      - platform: template
        value_template: "{{ is_state_attr('media_player.livebox_play', 'source', 'Téva') }}"
      # - platform: state
      #   entity_id: media_player.livebox_play
    # condition:
    #   - condition: state
    #     entity_id: media_player.livebox_play
    action:
      - service: notify.html5
        data:
          message: 'Marine is watching Téva again!'
      - service: notify.livingroom_tv
        data:
          message: 'Mimine! Tu regardes encore Téva! :)'

  - alias: 'Playing PS3'
    initial_state: false
    trigger:
      - platform: template
        value_template: "{{ is_state_attr('media_player.living_room_tv', 'source', 'Sony Playstation 3') }}"
    action:
      - service: notify.livingroom_tv
        data:
          message: 'Oh non, Mimine. Pas Skyrim ! PAS ENCORE !'

# vim: set filetype=yaml et sw=2 ts=2 :
