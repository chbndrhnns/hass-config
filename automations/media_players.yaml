  - alias: 'Media player paused/stopped'
    trigger:
      - platform: state
        entity_id: media_player.kodi
        from: 'playing'
    condition:
      - condition: state
        entity_id: sun.sun
        state: 'below_horizon'
    action:
      service: scene.turn_on
      entity_id: scene.living_room_normal

  - alias: 'Media player playing'
    trigger:
      - platform: state
        entity_id: media_player.kodi
        to: 'playing'
    condition:
      - condition: state
        entity_id: sun.sun
        state: 'below_horizon'
    action:
      service: scene.turn_on
      entity_id: scene.living_room_dim

  - alias: Daily reboot of the Livebox Play TV
    trigger:
      - platform: time
        hours: 4
        minutes: 35
        seconds: 12
    action:
      - service: script.livebox_play_reboot

  - alias: Turn off TV appliances if the TV is off for an hour
    trigger:
      platform: state
      entity_id: media_player.living_room_tv
      to: 'off'
      for:
        minutes: 15
    action:
      - service: script.power_off
      - service: switch.turn_off
        data:
          entity_id: switch.virt_livebox_play

  - alias: 'Watching Téva'
    trigger:
      - platform: template
        value_template: "{{ is_state_attr('media_player.livebox_play', 'source', 'Téva') }}"
      # - platform: state
      #   entity_id: media_player.livebox_play
    # condition:
    #   - condition: state
    #     entity_id: media_player.livebox_play
    action:
      - service: notify.html5
        data:
          message: 'Marine is watching Téva again!'
      - service: notify.livingroom_tv
        data:
          message: 'Mimine! Tu regardes encore Téva! :)'

# vim: set filetype=yaml et sw=2 ts=2 :
